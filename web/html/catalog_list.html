<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/web/css/style.css" type="text/css">
    <title>Список каталогов</title>
</head>
<body>

<h1>Добавить информацию в каталог</h1>
<form method="POST" action="/fgw/catalogs/add">
    <label>
        ИД родительской записи:
        <input type="number" name="parentId" placeholder="0">
        (заполняется для справочника (10) строчки при наличии склада)
    </label>
    <br>
    <label>
        Номер справочника:
        <select name="handbookId">
            {{ range .Handbooks}}
                <option value="{{ .IdHandbook}}">{{ .IdHandbook}} - {{ .Name}}</option>
            {{ end}}
        </select>
    </label>
    <br>
    <label>
        Название:
        <input type="text" name="name">
    </label>
    <br>
    <label>
        Комментарий:
        <input type="text" name="comment">
    </label>
    <br>
    <label>
        Поле справочника (0, 1, 3, 4, 9, 10):
        <input type="number" name="handbookValueInt1" placeholder="0">
    </label>
    <br>
    <label>
        Доп. поле справочника (0, 1, 3, 4, 9, 10):
        <input type="number" name="handbookValueInt2" placeholder="0">
    </label>
    <br>
    <label>
        Поле справочника (10) возможный процент использования:
        <input type="number" name="handbookValueDecimal1" step="0.01" placeholder="0.00">
    </label>
    <br>
    <label>
        Доп. поле справочника (10) вместимость, S, V:
        <input type="number" name="handbookValueDecimal2" step="0.01" placeholder="0.00">
    </label>
    <br>
    <label>
        Поле справочника (9) переупаковка да/нет:
        <input type="checkbox" name="handbookValueBool1">
    </label>
    <br>
    <label>
        Доп. поле справочника (10) наличие ЖД путей да/нет:
        <input type="checkbox" name="handbookValueBool2">
    </label>
    <br>
    <label>
        Архивная запись:
        <input type="checkbox" name="isArchive">
    </label>
    <br>
    <input type="submit" value="Добавить">
</form>
<br>

<table class="border-table">
    <thead>
    <tr>
        <th class="border-table">ИД</th>
        <th class="border-table">ИД родительской записи</th>
        <th class="border-table">Номер справочника</th>
        <th class="border-table">Индекс записи</th>
        <th class="border-table">Название</th>
        <th class="border-table">Комментарий</th>
        <th class="border-table">Поле справочника (0, 1, 3, 4, 9, 10)</th>
        <th class="border-table">Доп. поле справочника (0, 1, 3, 4, 9, 10)</th>
        <th class="border-table">Поле справочника (10) возможный процент использования</th>
        <th class="border-table">Доп. поле справочника (10) вместимость, S, V</th>
        <th class="border-table">Поле справочника (9) переупаковка да/нет</th>
        <th class="border-table">Доп. поле справочника (10) наличие ЖД путей да/нет</th>
        <th class="border-table">Архивная запись</th>
        <th class="border-table">Код владельца записи</th>
        <th class="border-table">Дата модификации</th>
        <th class="border-table">Код пользователя</th>
        <th class="border-table">Дата последней модификации</th>
    </tr>
    </thead>
    <tbody>
    {{ range .Catalogs}}
        <tr>
            {{if .IsEditing}}
                <form method="POST" action="/fgw/catalogs/update">
                    <td class="border-table">{{ .IdCatalog}}</td>
                    <td><label>
                            <input type="number" name="parentId" value="{{ .ParentId}}">
                        </label>
                    </td>

                    <td>
                        <label>
                            <select name="handbookId">
                                {{ $catalog := . }}
                                {{ range $.Handbooks }}
                                    <option value="{{ .IdHandbook}}"
                                            {{ if eq .IdHandbook $catalog.HandbookId }}selected{{ end}}>{{ .IdHandbook}}
                                        - {{ .Name}}</option>
                                {{ end}}
                            </select>
                        </label>
                    </td>

                    <td><label>
                            <input type="number" name="recordIndex" value="{{ .RecordIndex}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="text" name="name" value="{{ .Name}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="text" name="comment" value="{{ .Comment}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="number" name="handbookValueInt1" value="{{ .HandbookValueInt1}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="number" name="handbookValueInt2" value="{{ .HandbookValueInt2}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="number" name="handbookValueDecimal1" step="0.01"
                                   value="{{ .HandbookValueDecimal1}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="number" name="handbookValueDecimal2" step="0.01"
                                   value="{{ .HandbookValueDecimal2}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="checkbox" name="handbookValueBool1" value="{{ .HandbookValueBool1}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="checkbox" name="handbookValueBool2" value="{{ .HandbookValueBool2}}">
                        </label>
                    </td>
                    <td><label>
                            <input type="checkbox" name="isArchive" value="{{ .IsArchive}}">
                        </label>
                    </td>
                    <td class="border-table">{{ .OwnerUser}}</td>
                    <td class="border-table">{{ .OwnerUserDateTime}}</td>
                    <td class="border-table">{{ .LastUser}}</td>
                    <td class="border-table">{{ .LastUserDateTime}}</td>
                    <td>
                        <input type="hidden" name="idCatalog" value="{{ .IdCatalog}}">
                        <input type="submit" value="Сохранить">
                    </td>
                </form>
            {{else}}
                <td class="border-table">{{ .IdCatalog}}</td>
                <td class="border-table">{{ .ParentId}}</td>
                <td class="border-table">{{ .HandbookId}}</td>
                <td class="border-table">{{ .RecordIndex}}</td>
                <td class="border-table">{{ .Name}}</td>
                <td class="border-table">{{ .Comment}}</td>
                <td class="border-table">{{ .HandbookValueInt1}}</td>
                <td class="border-table">{{ .HandbookValueInt2}}</td>
                <td class="border-table">{{ .HandbookValueDecimal1}}</td>
                <td class="border-table">{{ .HandbookValueDecimal2}}</td>
                <td class="border-table">{{ .HandbookValueBool1}}</td>
                <td class="border-table">{{ .HandbookValueBool2}}</td>
                <td class="border-table">{{ .IsArchive}}</td>
                <td class="border-table">{{ .OwnerUser}}</td>
                <td class="border-table">{{ .OwnerUserDateTime}}</td>
                <td class="border-table">{{ .LastUser}}</td>
                <td class="border-table">{{ .LastUserDateTime}}</td>
                <td>
                    <a href="/fgw/catalogs/update?idCatalog={{ .IdCatalog}}">Изменить</a>
                    <form method="POST" action="/fgw/catalogs/delete" style="display:inline;">
                        <input type="hidden" name="idCatalog" value="{{ .IdCatalog}}">
                        <input type="submit" value="Удалить">
                    </form>
                </td>
            {{end}}
        </tr>
    {{ end}}
    </tbody>
</table>

</body>
</html>